# =========================
# Backend unified requirements.txt
# Python 3.11 / FastAPI + PostGIS + RAG + Ollama
# =========================

# --- Web API ---
fastapi==0.111.0
uvicorn[standard]==0.29.0

# --- Config / Serialization ---
pydantic>=2.7,<2.8
pydantic-settings>=2.2,<2.4
orjson==3.10.3
python-dotenv>=1.0.1
typing-extensions>=4.10.0

# --- HTTP clients ---
httpx==0.27.0
requests>=2.31,<2.33

# --- DB / ORM / GIS ---
SQLAlchemy==2.0.30
geoalchemy2==0.14.6
psycopg2-binary==2.9.9
shapely==2.0.4
geojson

# --- Data utils ---
pandas==2.2.2

# --- RAG / Vector DB client ---
chromadb==0.6.3          # サーバはコンテナ，クライアントはPython

# --- MD / Front matter parsing ---
python-frontmatter       # import frontmatter
PyYAML>=6.0.1

# --- LLM / Embeddings client ---
ollama                   # Pythonクライアント（OLLAMA_API_URLで接続）

# --- Optional: polyline decode（OSRMをpolylineで受ける場合のみ） ---
polyline

# --- Logging / Retry（必要に応じて） ---
loguru>=0.7.2
tenacity>=8.3.0

# ========== 将来Celeryに切替える場合（今は不要ならコメントのまま） ==========
celery[redis]==5.4.0
redis>=5.0.0

pyproj>=3.5,<3.7

# テスト用
pytest
respx==0.21.1
pytest-asyncio==0.23.7